{% extends 'staff-base.html' %}

{% block title %}office staff dashboard{% endblock %}

{% block content %}

    <!-- Main Content -->
    <div class="container mt-4">
        <h2 class="text-center mb-4">Student Fee Payment</h2>

        <!-- Fee Payment Form -->
        <div class="card shadow mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">Add Student Fee Payment</h5>
            </div>
            <div class="card-body">
                <form method="post" action="{% url 'studentfeepayment' %}">
                    {% csrf_token %}
                    <div class="row g-3 mb-3">
                        <!-- Student ID -->
                        <div class="col-md-4">
                            <label for="student_id" class="form-label">Student ID</label>
                            <input type="text" class="form-control" id="student_id" name="student_id" placeholder="Enter Student ID" required>
                        </div>
                        <!-- Amount -->
                        <div class="col-md-4">
                            <label for="amount" class="form-label">Amount</label>
                            <input type="number" class="form-control" id="amount" name="amount" placeholder="Enter Amount" required>
                        </div>
                        <!-- Payment Date -->
                        <div class="col-md-4">
                            <label for="paid_date" class="form-label">Payment Date</label>
                            <input type="date" class="form-control" id="paid_date" name="paid_date" required>
                        </div>
                    </div>

                    <div class="row g-3">
                        <!-- First Quarter Fee -->
                        <div class="col-md-3">
                            <label for="first_quarter_fee" class="form-label">1st Quarter Fee</label>
                            <select class="form-select" id="first_quarter_fee" name="first_quarter_fee">
                                <option value="paid">Paid</option>
                                <option value="pending" selected>Pending</option>
                            </select>
                        </div>
                        <!-- Second Quarter Fee -->
                        <div class="col-md-3">
                            <label for="second_quarter_fee" class="form-label">2nd Quarter Fee</label>
                            <select class="form-select" id="second_quarter_fee" name="second_quarter_fee">
                                <option value="paid">Paid</option>
                                <option value="pending" selected>Pending</option>
                            </select>
                        </div>
                        <!-- Third Quarter Fee -->
                        <div class="col-md-3">
                            <label for="third_quarter_fee" class="form-label">3rd Quarter Fee</label>
                            <select class="form-select" id="third_quarter_fee" name="third_quarter_fee">
                                <option value="paid">Paid</option>
                                <option value="pending" selected>Pending</option>
                            </select>
                        </div>
                        <!-- Other Fees -->
                        <div class="col-md-3">
                            <label for="other_fees" class="form-label">Other Fees</label>
                            <input type="number" class="form-control" id="other_fees" name="other_fees" placeholder="Enter Other Fees">
                        </div>
                    </div>

                    <div class="mt-3">
                        <!-- Remarks -->
                        <label for="remarks" class="form-label">Remarks</label>
                        <textarea class="form-control" id="remarks" name="remarks" rows="2" placeholder="Add any remarks (optional)"></textarea>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-success">Submit Payment</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Fee Payment History Table -->
        <div class="card shadow">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">Student Fee Payment History</h5>
            </div>
            <div class="card-body">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Student ID</th>
                            <th scope="col">Student Name</th>
                            <th scope="col">Amount</th>
                            <th scope="col">Paid Date</th>
                            <th scope="col">1st Quarter Fee</th>
                            <th scope="col">2nd Quarter Fee</th>
                            <th scope="col">3rd Quarter Fee</th>
                            <th scope="col">Other Fees</th>
                            <th scope="col">Remarks</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for fee in feerecord %}
                        <tr>
                            <td>{{ fee.student_id }}</td>
                            <td>{{ fee.student_name }}</td>
                            <td>{{ fee.amount }}</td>
                            <td>{{ fee.paid_date }}</td>
                            <td>{{ fee.first_quarter_fee|capfirst }}</td>
                            <td>{{ fee.second_quarter_fee|capfirst }}</td>
                            <td>{{ fee.third_quarter_fee|capfirst }}</td>
                            <td>{{ fee.other_fees }}</td>
                            <td>{{ fee.remarks }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="8" class="text-center">No payment history available</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% endblock %}
