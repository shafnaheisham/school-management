{% extends 'staff-base.html' %}

{% block title %}office staff dashboard{% endblock %}

{% block content %}

    <div class="container mt-5">
        <h2>Fees Management</h2>
        <div class="container mt-4">
            {% if message %}
            <div>
                 {{ message }}
                    </div>
              
            {% endif %}

        <!-- Class Selection and Fee Entry Form -->
        <form method="post" action="{% url 'addfees' %}" class="mb-4" id="feemanagement-form">
            {% csrf_token %}
            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="class_name" class="form-label">Select Class</label>
                    <select id="class_name" name="class_name" class="form-select">
                        <option value="KG">KG</option>
                        <option value="1">1st</option>
                        <option value="2">2nd</option>
                        <option value="3">3rd</option>
                        <option value="4">4th</option>
                        <option value="5">5th</option>
                        <option value="6">6th</option>
                        <option value="7">7th</option>
                        <option value="8">8th</option>
                        <option value="9">9th</option>
                        <option value="10">10th</option>
                        <option value="11">11th</option>
                        <option value="12">12th</option>
                    </select>
                </div>

                <div class="col-md-4">
                    <label for="first_quarter_fees" class="form-label">1st Quarter Fee</label>
                    <input type="number" id="first_quarter_fees" name="first_quarter_fees" class="form-control" placeholder="Enter 1st Quarter Fee">
                </div>

                <div class="col-md-4">
                    <label for="second_quarter_fees" class="form-label">2nd Quarter Fee</label>
                    <input type="number" id="second_quarter_fees" name="second_quarter_fees" class="form-control" placeholder="Enter 2nd Quarter Fee">
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="third_quarter_fees" class="form-label">3rd Quarter Fee</label>
                    <input type="number" id="third_quarter_fees" name="third_quarter_fees" class="form-control" placeholder="Enter 3rd Quarter Fee">
                </div>

                <div class="col-md-4">
                    <label for="other_fees" class="form-label">Other Fee</label>
                    <input type="number" id="other_fees" name="other_fees" class="form-control" placeholder="Enter Other Fee">
                </div>

            </div>

            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
        <div class="mb-3">
            <form method="get" action="{% url 'addfees' %}" class="mb-4" id="view-feemanagement-form" >
           {% csrf_token %}
        <!-- Search Fees by Class -->
        <label for="searchClass" class="form-label">Search by Class</label>
        <select id="searchClass" name="searchClass" class="form-select">
            <option value="" disabled selected>Choose a Class</option>
            <option value="KG">KG</option>
            <option value="1">1st</option>
            <option value="2">2nd</option>
            <option value="3">3rd</option>
            <option value="4">4th</option>
            <option value="5">5th</option>
            <option value="6">6th</option>
            <option value="7">7th</option>
            <option value="8">8th</option>
            <option value="9">9th</option>
            <option value="10">10th</option>
            <option value="11">11th</option>
            <option value="12">12th</option>
        </select>
    </div>

    <button type="button" class="btn btn-secondary">Search</button>
</form>
        
                
        <!-- Fee Structure Table -->
        <h3 class="mt-4">Fee Structure</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Class</th>
                    <th scope="col">1st Quarter Fee</th>
                    <th scope="col">2nd Quarter Fee</th>
                    <th scope="col">3rd Quarter Fee</th>
                    <th scope="col">Other Fee</th>
                    
                </tr>
            </thead>
            <tbody>
                {% for fee in fees_detail %}
                <tr>
                    <td>{{ fee.class_name }}</td>
                    <td>{{ fee.first_quarter_fees }}</td>
                    <td>{{ fee.second_quarter_fees }}</td>
                    <td>{{ fee.third_quarter_fees }}</td>
                    <td>{{ fee.other_fees }}</td>

                    <td>
                        <form action="{{ fee.class_name }}" method="patch">
                            {% csrf_token %}
                            <input type="hidden" name="_method" value="PATCH">  <!-- Custom method for PATCH -->
                            <button type="submit" class="btn btn-warning btn-sm">Edit</button>
                        </form>
                        <form action="{{ fee.class_name }}" method="delete" onsubmit="return confirm('Are you sure you want to delete this Student')">
                            {% csrf_token %}
                            <input type="hidden" name="_method" value="delete">  <!-- Custom method for DELETE -->
                            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                        </form>
                    
                        
                    </td>
                    
                </tr>
                {% endfor %}
            </tbody>
        </table>
   
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
{% endblock %}
